/* ========================================
   MAGIC CLOCK PWA
   ======================================== */

*, *::before, *::after {
  margin: 0; padding: 0; box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

:root {
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);
}

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  background: #000;
  font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
}

/* ========================================
   BACKGROUND
   ======================================== */

#bg-layer {
  position: fixed; inset: 0; z-index: 0;
  background: linear-gradient(160deg, #0a0a2e 0%, #1a0a3a 40%, #0a1a2e 100%);
}

#bg-layer.wall {
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* ========================================
   BLACKOUT â€” covers screen while mago sets offset
   Sits above lockscreen but below keypad
   ======================================== */

#blackout {
  position: fixed; inset: 0;
  z-index: 3;
  background: #000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.12s ease;
}

#blackout.active {
  opacity: 1;
}

/* ========================================
   LOCKSCREEN
   ======================================== */

#lockscreen {
  position: fixed; inset: 0; z-index: 1;
  display: flex; flex-direction: column; align-items: center;
  padding-top: calc(var(--sat) + 10px);
  padding-bottom: calc(var(--sab) + 8px);
  padding-left: var(--sal);
  padding-right: var(--sar);
  color: #fff;
  pointer-events: none;
}

#lock-top {
  width: 100%; display: flex; justify-content: center;
  padding-top: 6px; min-height: 28px;
}

#lock-icon {
  opacity: 0.5; padding: 10px 20px;
  pointer-events: auto; cursor: pointer;
}

#clock-area {
  flex: 1; display: flex; flex-direction: column;
  justify-content: flex-start; align-items: center; width: 100%;
}

#time-display {
  font-variant-numeric: tabular-nums;
  line-height: 1;
  text-shadow: 0 2px 24px rgba(0,0,0,0.5);
  transition: opacity 0.15s ease;
}

#time-display.flash { opacity: 0.4; }

#date-display { text-shadow: 0 1px 12px rgba(0,0,0,0.4); }

#lock-bottom {
  width: 100%; display: flex; justify-content: center; padding-bottom: 8px;
}

#bottom-bar {
  width: 134px; height: 5px; border-radius: 100px;
  background: rgba(255,255,255,0.3);
}

/* ========================================
   iOS (iOS 17)
   ======================================== */

body.style-ios #clock-area { padding-top: 14vh; }

body.style-ios #time-display {
  font-family: -apple-system, 'SF Pro Display', 'Helvetica Neue', sans-serif;
  font-weight: 700;
  font-size: clamp(68px, 20vw, 92px);
  letter-spacing: 2px;
}

body.style-ios #date-display {
  font-family: -apple-system, 'SF Pro Display', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: clamp(16px, 4.5vw, 20px);
  opacity: 0.85; margin-top: 10px; letter-spacing: 0.3px;
}

/* ========================================
   ANDROID (Material You)
   ======================================== */

body.style-android #clock-area { padding-top: 18vh; }

body.style-android #time-display {
  font-family: 'Noto Sans', 'Roboto', sans-serif;
  font-weight: 100;
  font-size: clamp(62px, 18vw, 86px);
  letter-spacing: 2px;
}

body.style-android #date-display {
  font-family: 'Noto Sans', 'Roboto', sans-serif;
  font-weight: 300;
  font-size: clamp(14px, 3.8vw, 17px);
  opacity: 0.75; margin-top: 8px; letter-spacing: 0.5px;
}

body.style-android #lock-icon {
  opacity: 0; pointer-events: auto;
}

/* ========================================
   FULL-SCREEN KEYPAD (above blackout)
   ======================================== */

#keypad-overlay {
  position: fixed; inset: 0; z-index: 5;
  display: flex; flex-direction: column;
  padding: calc(var(--sat) + 30px) 0 calc(var(--sab) + 30px) 0;
  pointer-events: auto;
  opacity: 1;
  transition: opacity 0.8s ease;
}

#keypad-overlay.faded {
  opacity: 0;
  pointer-events: auto;
}

.kp-row {
  flex: 1; display: flex;
  align-items: center; justify-content: space-around;
  padding: 0 8vw;
}

.kp-btn {
  flex: 1; display: flex;
  align-items: center; justify-content: center;
  height: 100%;
  font-family: -apple-system, 'Helvetica Neue', 'Noto Sans', sans-serif;
  font-size: clamp(28px, 7vw, 40px);
  font-weight: 300;
  color: rgba(255,255,255, 0.09);
  cursor: pointer;
}

.kp-btn:active { background: rgba(255,255,255, 0.03); }

.kp-sign {
  font-weight: 200;
  font-size: clamp(32px, 8vw, 44px);
}

/* ========================================
   SECRET MENU
   ======================================== */

#secret-menu {
  position: fixed; inset: 0; z-index: 200;
  background: rgba(0,0,0,0.92);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  display: flex; align-items: center; justify-content: center;
  padding: calc(var(--sat) + 10px) var(--sar) calc(var(--sab) + 10px) var(--sal);
  overflow-y: auto;
}

#secret-menu.hidden { display: none; }

#menu-panel {
  background: rgba(24,24,44,0.95);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 20px;
  padding: 26px 22px 20px;
  width: min(380px, 90vw);
  max-height: 85vh;
  overflow-y: auto;
  color: #fff;
}

#menu-panel h2 {
  font-size: 18px; font-weight: 500;
  margin-bottom: 18px; text-align: center;
  letter-spacing: 0.06em; opacity: 0.85;
}

#menu-panel label {
  display: block; font-size: 11px; font-weight: 500;
  text-transform: uppercase; letter-spacing: 0.1em;
  opacity: 0.4; margin-top: 16px; margin-bottom: 7px;
}

.btn-group { display: flex; gap: 5px; flex-wrap: wrap; }

.btn-group button {
  flex: 1; min-width: 55px; padding: 9px 4px;
  border: 1px solid rgba(255,255,255,0.1); border-radius: 10px;
  background: rgba(255,255,255,0.04); color: rgba(255,255,255,0.5);
  font-size: 13px; cursor: pointer; transition: all 0.2s;
}

.btn-group button.active {
  background: rgba(255,255,255,0.15);
  color: #fff; border-color: rgba(255,255,255,0.28);
}

#menu-panel input[type="range"] {
  width: 100%; accent-color: #667; margin-top: 4px;
}

#menu-panel > span { font-size: 12px; opacity: 0.4; }

#menu-panel button:not(.btn-group button):not(#btn-remove-custom-bg) {
  display: block; width: 100%; padding: 11px;
  margin-top: 10px;
  border: 1px solid rgba(255,255,255,0.1); border-radius: 12px;
  background: rgba(255,255,255,0.04); color: rgba(255,255,255,0.7);
  font-size: 14px; cursor: pointer; transition: background 0.2s;
}

#menu-panel button:not(.btn-group button):not(#btn-remove-custom-bg):active {
  background: rgba(255,255,255,0.12);
}

#btn-close-menu {
  margin-top: 18px !important;
  background: rgba(90,90,220,0.12) !important;
  color: #fff !important;
}

/* Custom BG preview */
#custom-bg-preview {
  display: flex; align-items: center; justify-content: space-between;
  margin-top: 8px; padding: 8px 12px;
  background: rgba(255,255,255,0.06); border-radius: 10px;
}

#custom-bg-preview.hidden { display: none; }

#custom-bg-preview span {
  font-size: 13px; color: rgba(255,255,255,0.6);
}

#btn-remove-custom-bg {
  padding: 5px 12px;
  border: 1px solid rgba(255,100,100,0.3); border-radius: 8px;
  background: rgba(255,100,100,0.1); color: rgba(255,150,150,0.9);
  font-size: 12px; cursor: pointer;
}

.toggle-label {
  display: flex !important; align-items: center; gap: 10px;
  margin-top: 14px !important; text-transform: none !important;
  font-size: 14px !important; opacity: 0.7 !important; cursor: pointer;
}

.toggle-label input[type="checkbox"] {
  width: 18px; height: 18px; accent-color: #667;
}

#debug-log {
  margin-top: 8px; padding: 10px;
  background: rgba(0,0,0,0.5); border-radius: 8px;
  font-size: 11px; font-family: monospace;
  color: rgba(255,255,255,0.5);
  max-height: 180px; overflow-y: auto;
  white-space: pre-wrap; word-break: break-all;
}

#debug-log.hidden { display: none; }
#motion-permission.hidden { display: none; }

#menu-panel::-webkit-scrollbar,
#debug-log::-webkit-scrollbar { width: 3px; }
#menu-panel::-webkit-scrollbar-thumb,
#debug-log::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.1); border-radius: 3px;
}
